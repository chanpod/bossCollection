extends layout

block body
    section(ng-controller = "navbar", layout = "row", flex, ng-cloak, md-swipe-right = "openSideBar('left')", md-swipe-left = "closeSideBar('left')")
        include indexViews/sideNav
                    
        div(layout = "column", flex)
            md-toolbar().md-accent.md-whiteframe-3dp.legionShadow
                div(flex).md-toolbar-tools
                    div(layout, layout-align = "start center", hide-gt-sm)
                        md-button(layout, layout-align = "start center", aria-label = "settings", ng-click = "toggle()").md-icon-button
                            i(class = "material-icons") menu
                    div(flex, layout-align = "start center", layout)
                        div()
                            h2()
                                | {{title}}
                    div(flex, hide-xs, layout-align = "start center", layout)
                        h2
                            | {{user.guild.name}}
                    div(flex)
                        md-menu(flex, layout-align = "end center", layout)
                            div(layout, ng-click = "openMenu($mdOpenMenu, $event)", md-ink-ripple="#FF0000").mousePointer                           
                                    user-display(user = "user.name", fontsize = "12", hideicon = "true")         
                                    div(flex, layout, layout-align = "center center")                       
                                        i(class="material-icons") keyboard_arrow_down
                            md-menu-content(width = "4")                                
                                md-menu-item(ng-show = "loggedIn")
                                    md-button(ng-click = "goTo('/auth/updateAccount')")
                                        md-icon(md-font-library="material-icons") mode_edit
                                        | Update
                                md-menu-item(ng-show = "loggedIn && user.rank > 1")
                                    md-button(ng-click = "goTo('/forum/favorites')") 
                                        md-icon(md-font-library="material-icons") favorite
                                        | Favorites
                                md-menu-item(ng-show = "loggedIn")
                                    md-button(ng-click = "logout()")
                                        md-icon(md-font-library="material-icons") exit_to_app
                                        | Logout
                                md-menu-item(ng-show = "!loggedIn")
                                    md-button(ng-click = "showLoginBottomSheet($event)")
                                        | Log In
                                    //md-button(ng-click = "goTo('auth/login')")
                                        | Log In
                                md-menu-item(ng-show = "!loggedIn")
                                    md-button(ng-click = "goTo('auth/signup')")
                                        | Register
                   
                            
                    
            
            md-content(layout, flex)
                
                div(id = "ngView", flex, ng-view).slide   

    include ../public/components/home/home
    include ../public/components/home/guildVisit    
    
    
    include ../public/components/accounts/login
    include ../public/components/accounts/signup
    include ../public/components/accounts/userDisplay/userDisplayTemplate
    
    include ../public/components/accounts/editAccount
    include ../public/components/guild/applications/application
    include ../public/components/guild/applications/reviewApplications
    include ../public/components/guild/createGuild/createGuild
    include ../public/components/guild/joinGuild/joinGuild
    include ../public/components/guild/manageMembers/manageMembers
    include ../public/components/guild/guildSettings/guildSettings
    
    //-Forum
    include ../public/components/forums/forumTemplate
    include ../public/components/forums/threads/threadTemplate
    include ../public/components/forums/bottomSheetViews/category
    include ../public/components/forums/bottomSheetViews/forumEdit
    include ../public/components/forums/favorites/favoritesTemplate
    include ../public/components/forums/bottomSheetViews/threadEdit
    include ../public/components/forums/comments/commentsTemplate
    
    //-Absence
    include ../public/components/attendance/attendanceStatistics/attendanceStatsTemplate
    include ../public/components/attendance/reportAbsence/absence
    include ../public/components/attendance/viewReports/absenceSubmissions
    include ../public/components/attendance/editAbsenceModal
    include ../public/components/guild/directives/listGuildMembers/listGuildMembersTemplate
    
    include ../public/js/directives/inputMarkdown/inputMarkdownTemplate
    include ../public/js/directives/displayMarkdownText/template
    
    include ../public/components/accounts/modals/logInModal
    include ../public/components/accounts/modals/reset-password
    include modals/loadingModal
