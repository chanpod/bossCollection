"use strict";angular.module("BossCollection",["BossCollection.controllers","BossCollection.services","BossCollection.directives","ngRoute","ngResource","btford.socket-io","ngCookies"]).factory("mySocket",["socketFactory",function(a){return a()}]).config(["$routeProvider","$locationProvider","$httpProvider","$sceDelegateProvider",function(a,b,c,d){a.when("/",{templateUrl:"home",controller:"homeController"}).when("/strategyRoom/:raid",{templateUrl:"strategyRoom",controller:"strategyRoomController"}).when("/roster",{templateUrl:"roster",controller:"rosterController"}).otherwise({redirectTo:"/"}),b.hashPrefix("!"),d.resourceUrlWhitelist(["self","https://www.youtube.com/**","https://pagead2.googlesyndication.com"]),b.html5Mode(!0)}]),angular.module("BossCollection.controllers",[]).controller("homeController",["$scope","$location","$http","$timeout",function(a,b,c,d){try{(adsbygoogle=window.adsbygoogle||[]).push({})}catch(e){}$(".parallax").parallax();var f=[{selector:"#staggered-test",offset:50,callback:'Materialize.toast("This is our ScrollFire Demo!", 1500 )'},{selector:"#staggered-test",offset:205,callback:'Materialize.toast("Please continue scrolling!", 1500 )'},{selector:"#staggered-test",offset:400,callback:'Materialize.showStaggeredList("#staggered-test")'},{selector:"#image-test",offset:500,callback:'Materialize.fadeInImage("#image-test")'}];Materialize.scrollFire(f)}]),angular.module("BossCollection.controllers").controller("rosterController",["$scope","filterFilter","socketProvider","guildServices","$http","$cookies","$location",function(a,b,c,d,e,f,g){function h(){var b=f.getObject("ranksList");b&&(a.raiderRanks=b.raiderRanks,a.trialRanks=b.trialRanks,a.guild=b.guild,a.realm=b.realm)}a.currentRosterDropdown=!0,a.applicantsDropdown=!1;var i=["placeholder","warrior","paladin","hunter","rogue","priest","death knight","shaman","mage","warlock","monk","druid"];a.raiders=[],a.trials=[],a.trialRanks=[9],a.raiderRanks=[0,2,6],a.guild="mkdir bosscollection",a.realm="zul'jin",a.loading=!0,a.genders=["Male","Female"],h(),$("ul.tabs").tabs(),a.getMembers=function(){a.raiders=[],a.trials=[],a.loading=!0,d.getGuild(a.realm,a.guild).then(function(b){a.loading=!1,k(b)},function(b){a.loading=!1,console.log(b)})},a.getUser=function(){e({method:"POST",url:"/getUser"}).success(function(a){console.log(a)})},a.openArmoryProfile=function(a,b){var c="http://us.battle.net/wow/en/character/"+b+"/"+a+"/simple";window.open(c)},a.saveRanksList=function(){var b={guild:a.guild,realm:a.realm,trialRanks:a.trialRanks,raiderRanks:a.raiderRanks};f.putObject("ranksList",b)};var j=function(b,c,d){try{var e={name:b.character.name,"class":d.charAt(0).toUpperCase()+d.slice(1),rank:c,gender:a.genders[b.character.gender],race:b.character.race,spec:b.character.spec.name,achievementPoints:b.character.achievementPoints,avatar:"http://us.battle.net/static-render/us/"+b.character.thumbnail};return e}catch(f){console.log(b)}},k=function(b){for(var c=0;c<b.length;c++){var d=b[c].rank,e=_.find(a.raiderRanks,function(a){return d==a}),f=_.find(a.trialRanks,function(a){return d==a}),g=i[b[c].character["class"]];e&&a.raiders.push(j(b[c],d,g)),f&&a.trials.push(j(b[c],d,g))}a.raiders.sort(function(a,b){return a.rank-b.rank})};a.lowLvlTrials=[],a.getMembers()}]),angular.module("BossCollection.controllers").controller("strategyRoomController",["$scope",function(a){}]),angular.module("BossCollection.controllers").controller("bossStrategyController",["$scope","bossStrats","socketProvider","$routeParams",function(a,b,c,d){function e(){for(var b in a.raidToDisplay)a.raidToDisplay[b].isSelected=!1}function f(){document.getElementById("sideNavID").style.height=window.outerHeight/2+"px"}function g(a){return/(?:https?:\/\/|www\.|m\.|^)youtu(?:be\.com\/watch\?(?:.*?&(?:amp;)?)?v=|\.be\/)([\w‌​\-]+)(?:&(?:amp;)?[\w\?=]*)?/.test(a)}a.highmaulBossSelected=!1,a.brfBossSelected=!1,a.hfcBossSelected=!1,$(".modal-trigger").leanModal();try{(adsbygoogle=window.adsbygoogle||[]).push({})}catch(h){console.log("Google broke again")}var i=d.raid;a.highmaul="hm",a.brf="brf",a.hfc="hfc",a.bossInfo={},a.loadChat=!1,a.difficultySelected="",a.currentEmbedUrl="",a.addNewBoss=!1,a.currentRaid={},a.raidToDisplay={},a.name="",a.url="",a.init=function(){f(),b.getStrats(i).then(function(b){a.raidToDisplay=b.bosses,a.raidData=b,e()})},a.addVideo=function(b,c,d){a.currentBoss=b,a.currentDifficulty=c,a.currentRaid=d},a.saveNewBossInfo=function(c,d,e,f){if(console.log(e),g(d)){var h=d.split("&");h=h[0].split("="),d=h[1],"heroic"==f?e.heroic.videos[e.heroic.videos.length]={name:c,url:d}:"mythic"==f&&(e.mythic.videos[e.mythic.videos.length]={name:c,url:d}),a.raidData.bosses=a.raidToDisplay,console.log(a.raidData),b.saveStrats(a.raidData,d),a.addNewBoss=!1,a.name="",a.url="",a.addNewBoss=!a.addNewBoss}else $("#urlInput").popover("show")},a.changeBossInfo=function(b,c){b.isSelected=!b.isSelected,a.bossSelected=b.name,a.addNewBoss=!1},a.changeDifficulty=function(a,b){a.difficultySelected=b,"- Heroic"==b?(a.heroic.isSelected=!a.heroic.isSelected,a.mythic.isSelected=!1):(a.mythic.isSelected=!a.mythic.isSelected,a.heroic.isSelected=!1)},a.setUrl=function(b){a.currentEmbedUrl=b},a.open=function(b){a.setUrl(b),console.log(b),$("#bossVideo").openModal()},a.init()}]),angular.module("BossCollection.controllers").controller("bossStrategyController",["$scope","bossStrats","$modal","socketProvider","$routeParams",function(a,b,c,d,e){function f(){for(var b in a.raidToDisplay)a.raidToDisplay[b].isSelected=!1}function g(){document.getElementById("sideNavID").style.height=window.outerHeight/2+"px"}function h(a){return/(?:https?:\/\/|www\.|m\.|^)youtu(?:be\.com\/watch\?(?:.*?&(?:amp;)?)?v=|\.be\/)([\w‌​\-]+)(?:&(?:amp;)?[\w\?=]*)?/.test(a)}a.highmaulBossSelected=!1,a.brfBossSelected=!1,a.hfcBossSelected=!1;try{(adsbygoogle=window.adsbygoogle||[]).push({})}catch(i){console.log("Google broke again")}var j=e.raid;a.highmaul="hm",a.brf="brf",a.hfc="hfc",a.bossInfo={},a.loadChat=!1,a.difficultySelected="",a.currentEmbedUrl="",a.addNewBoss=!1,a.currentRaid={},a.raidToDisplay={},a.name="",a.url="",a.init=function(){g(),b.getStrats(j).then(function(b){a.raidToDisplay=b.bosses,a.raidData=b,f()})},a.addVideo=function(b,c,d){a.currentBoss=b,a.currentDifficulty=c,a.currentRaid=d},a.saveNewBossInfo=function(c,d,e,f){if(console.log(e),h(d)){var g=d.split("&");g=g[0].split("="),d=g[1],"heroic"==f?e.heroic.videos[e.heroic.videos.length]={name:c,url:d}:"mythic"==f&&(e.mythic.videos[e.mythic.videos.length]={name:c,url:d}),a.raidData.bosses=a.raidToDisplay,console.log(a.raidData),b.saveStrats(a.raidData,d),a.addNewBoss=!1,a.name="",a.url="",a.addNewBoss=!a.addNewBoss}else $("#urlInput").popover("show")},a.changeBossInfo=function(b,c){b.isSelected=!b.isSelected,a.bossSelected=b.name,a.addNewBoss=!1},a.changeDifficulty=function(a,b){a.difficultySelected=b,"- Heroic"==b?(a.heroic.isSelected=!a.heroic.isSelected,a.mythic.isSelected=!1):(a.mythic.isSelected=!a.mythic.isSelected,a.heroic.isSelected=!1)},a.setUrl=function(b){a.currentEmbedUrl=b},a.open=function(b){a.setUrl(b),console.log(b);c.open({templateUrl:"videoModal",controller:"videoController",size:"lg",windowClass:"videoModal",resolve:{currentUrl:function(){return a.currentEmbedUrl}}})},a.init()}]),angular.module("BossCollection.controllers").controller("videoController",["$scope","currentUrl","$modalInstance",function(a,b,c){a.url=b,a.getIframeSrc=function(){return"https://www.youtube.com/embed/"+a.url},a.close=function(){c.dismiss("cancel")},a.embedUrl=a.url}]),angular.module("BossCollection.directives",[]).directive("bossstrategies",[function(){return{restrict:"E",templateUrl:"bossStrategy",controller:"bossStrategyController",link:function(a,b,c){}}}]),angular.module("BossCollection.filters",[]).filter("interpolate",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}),angular.module("BossCollection.services",[]).factory("bossStrats",["socketProvider","$resource","$q",function(a,b,c){var d=b("/api/bossStrats",{},{update:{method:"PUT"}}),e={getStrats:function(a){var b=c.defer();console.log("Request Boss Info");var e={name:a};return d.save(e).$promise.then(function(a){console.log("Result: "),console.log(a),b.resolve(a.result)}),b.promise},saveStrats:function(a,b){console.log("Saving info now");var c={raidData:a,url:b};c=angular.toJson(c),console.log(c),d.data=c,d.update(c,function(a){console.log("Result: "+a)})}};return e}]),angular.module("BossCollection.services").factory("guildServices",["$http","$q",function(a,b){var c="https://us.api.battle.net/wow/guild/",d="?fields=members&locale=en_US&apikey=fqvadba9c8auw7brtdr72vv7hfntbx7d",e={checkGuild:function(a){},getGuild:function(e,f){var g=b.defer();if(""!=e&&""!=f)var h=c+encodeURIComponent(e)+"/"+encodeURIComponent(f)+d;return a({method:"GET",url:h}).success(function(a){g.resolve(a.members)}),g.promise}};return e}]),angular.module("BossCollection.services").factory("socketProvider",[function(){var a=io("http://54.173.24.121:4001");return a}]);