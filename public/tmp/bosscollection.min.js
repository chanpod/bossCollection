"use strict";angular.module("BossCollection",["BossCollection.controllers","BossCollection.services","BossCollection.directives","ngRoute","ui.bootstrap","ngResource","btford.socket-io","ngCookies"]).factory("mySocket",["socketFactory",function(a){return a()}]).config(["$routeProvider","$locationProvider","$httpProvider","$sceDelegateProvider",function(a,b,c,d){a.when("/",{templateUrl:"home",controller:"homeController"}).when("/strategyRoom/:raid",{templateUrl:"strategyRoom",controller:"strategyRoomController"}).when("/roster",{templateUrl:"roster",controller:"rosterController"}).otherwise({redirectTo:"/"}),b.hashPrefix("!"),d.resourceUrlWhitelist(["self","https://www.youtube.com/**","https://pagead2.googlesyndication.com"]),b.html5Mode(!0)}]),angular.module("BossCollection.controllers",[]).controller("homeController",["$scope","$location","$http","$timeout",function(a,b,c,d){(adsbygoogle=window.adsbygoogle||[]).push({}),a.myInterval=1e4;var e=[{image:"/images/InterfaceSS/defragInterface.jpg",text:"Ortharion's Interface!"},{image:"/images/InterfaceSS/caesarInterface.jpg",text:"Caesar's Interface!"},{image:"http://i.imgur.com/MGgMDok.jpg",text:"Szii's Interface!"},{image:"http://i.imgur.com/ePuSV2G.jpg",text:"Natsuri's Interface!"},{image:"/images/InterfaceSS/rayyenInterface.jpg",text:"Rayyan's Interface!"},{image:"http://i.imgur.com/bf5QUqy.jpg",text:"Ortharion's alternate Interface!"}],f=a.slides=[];a.addSlide=function(a){f.push(e[a])};for(var g=0;g<e.length;g++)a.addSlide(g);a.stroke=9,a.radius=40,a.progressColor="#069",a.bgColor="#eaeaea",a.isSemi=!1,a.showGuild=!1,a.welcomeMessage="Welcome to Boss Collection's Guild Website.",a.guild="",a.realm="Zul'jin",a.characterName="",a.character={},a.classColor="shamanClassColor",a.iLvl="",a.achievmentPoints=a.character.achievementPoints,a.characterImage="",a.showLoadingGif=!1,a.$watch("character",function(b,c){a.achievmentPoints=a.character.achievementPoints},!0),$("#getGuildMessage").popover({content:"Seems to be taking a while. Did you spell the guild name correctly? Sometimes this functionality can be blocked by corporate firewalls.Could be something just broke :( ",trigger:"manual"})}]),angular.module("BossCollection.controllers").controller("rosterController",["$scope","filterFilter","socketProvider","guildServices","$http",function(a,b,c,d,e){a.currentRosterDropdown=!0,a.applicantsDropdown=!1,a.trials=[];var f=["placeholder","warrior","paladin","hunter","rogue","priest","dk","shaman","mage","warlock","monk","druid"];a.raiders=[],a.trialRanks=[9],a.raiderRanks=[0,1,3,6],a.guild="mkdir bosscollection",a.realm="zul'jin",a.getMembers=function(){a.raiders=[],a.trials=[],console.log("Function called"),d.getGuild(a.realm,a.guild).then(function(a){console.log(a),g(a)},function(a){console.log(a)})},a.getUser=function(){e({method:"POST",url:"/getUser"}).success(function(a){console.log(a)})};var g=function(b){for(var c=0;c<b.length;c++){for(var d=b[c].rank,e=0;e<a.raiderRanks.length;e++)if(a.raiderRanks[e]==d){var g=f[b[c].character["class"]],h={name:b[c].character.name,"class":g.charAt(0).toUpperCase()+g.slice(1),rank:d,spec:b[c].character.spec.name,avatar:"http://us.battle.net/static-render/us/"+b[c].character.thumbnail};a.raiders.push(h)}for(var e=0;e<a.trialRanks.length;e++)if(a.trialRanks[e]==d){var g=f[b[c].character["class"]],h={name:b[c].character.name,"class":g.charAt(0).toUpperCase()+g.slice(1),rank:d,spec:b[c].character.spec.name,avatar:"http://us.battle.net/static-render/us/"+b[c].character.thumbnail};a.trials.push(h)}}a.raiders.sort(function(a,b){return a.rank-b.rank})};a.lowLvlTrials=[],a.getMembers()}]),angular.module("BossCollection.controllers").controller("strategyRoomController",["$scope",function(a){}]),angular.module("BossCollection.controllers").controller("bossStrategyController",["$scope","bossStrats","$modal","socketProvider","$routeParams",function(a,b,c,d,e){function f(){document.getElementById("sideNavID").style.height=window.outerHeight/2+"px"}function g(a){return/(?:https?:\/\/|www\.|m\.|^)youtu(?:be\.com\/watch\?(?:.*?&(?:amp;)?)?v=|\.be\/)([\w‌​\-]+)(?:&(?:amp;)?[\w\?=]*)?/.test(a)}function h(){for(var b in a.raidToDisplay)a.raidToDisplay[b].isSelected=!1}var i=d;a.highmaulBossSelected=!1,a.brfBossSelected=!1,a.hfcBossSelected=!1;try{(adsbygoogle=window.adsbygoogle||[]).push({})}catch(j){console.log("Google broke again")}var k=e.raid;a.highmaul="hm",a.brf="brf",a.hfc="hfc",a.bossInfo={},a.loadChat=!1,a.difficultySelected="",a.currentEmbedUrl="",a.addNewBoss=!1,a.currentRaid={},a.raidToDisplay={},a.name="",a.url="",f(),a.addVideo=function(b,c,d){a.currentBoss=b,a.currentDifficulty=c,a.currentRaid=d},a.saveNewBossInfo=function(c,d,e,f){if(console.log(e),g(d)){var h=d.split("&");h=h[0].split("="),d=h[1],"heroic"==f?e.heroic.videos[e.heroic.videos.length]={name:c,url:d}:"mythic"==f&&(e.mythic.videos[e.heroic.videos.length]={name:c,url:d}),a.raidData.bosses=a.raidToDisplay,console.log(a.raidData),b.saveStrats(a.raidData,d),a.addNewBoss=!1,a.name="",a.url="",a.addNewBoss=!a.addNewBoss}else $("#urlInput").popover("show")},i.on("addVideoSuccess",function(c){console.log("Success: "+c),"success"==c&&(console.log("Getting updated boss info"),b.getStrats(k),a.addNewBoss=!a.addNewBoss)}),i.on("saveFailed",function(a){console.log(a)}),a.changeBossInfo=function(b,c){b.isSelected=!b.isSelected,a.bossSelected=b.name,a.addNewBoss=!1},a.changeDifficulty=function(a,b){a.difficultySelected=b,"- Heroic"==b?(a.heroic.isSelected=!a.heroic.isSelected,a.mythic.isSelected=!1):(a.mythic.isSelected=!a.mythic.isSelected,a.heroic.isSelected=!1)},i.on("bossInfoData",function(b){console.log(k),a.raidToDisplay=b.bosses,a.raidData=b,h(),a.$apply()}),b.getStrats(k),a.setUrl=function(b){a.currentEmbedUrl=b},a.open=function(b){a.setUrl(b),console.log(b);c.open({templateUrl:"videoModal",controller:"videoController",size:"lg",windowClass:"videoModal",resolve:{currentUrl:function(){return a.currentEmbedUrl}}})}}]),angular.module("BossCollection.controllers").controller("videoController",["$scope","currentUrl","$modalInstance",function(a,b,c){a.url=b,a.getIframeSrc=function(){return"https://www.youtube.com/embed/"+a.url},a.close=function(){c.dismiss("cancel")},a.embedUrl=a.url}]),angular.module("BossCollection.directives",[]).directive("bossstrategies",[function(){return{restrict:"E",templateUrl:"bossStrategy",controller:"bossStrategyController",link:function(a,b,c){}}}]),angular.module("BossCollection.filters",[]).filter("interpolate",function(a){return function(b){return String(b).replace(/\%VERSION\%/gm,a)}}),angular.module("BossCollection.services",[]).factory("bossStrats",["socketProvider",function(a){var b={getStrats:function(b){console.log("Request Boss Info"),a.emit("getBossInfo",b)},saveStrats:function(b,c){console.log("Saving info now");var d={raidData:b,url:c};d=angular.toJson(d),console.log(d),a.emit("saveStrats",d)}};return b}]),angular.module("BossCollection.services").factory("guildServices",["$http","$q",function(a,b){var c="https://us.api.battle.net/wow/guild/",d="?fields=members&locale=en_US&apikey=fqvadba9c8auw7brtdr72vv7hfntbx7d",e={checkGuild:function(a){},getGuild:function(e,f){var g=b.defer();if(""!=e&&""!=f)var h=c+encodeURIComponent(e)+"/"+encodeURIComponent(f)+d;return a({method:"GET",url:h}).success(function(a){g.resolve(a.members)}),g.promise}};return e}]),angular.module("BossCollection.services").factory("socketProvider",[function(){var a=io("http://54.173.24.121:4001");return a}]);